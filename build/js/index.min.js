(() => {
  const currencyConverterApp = angular.module('currencyConverterApp', ['ngSanitize']);

  window.currencyConverterApp = currencyConverterApp;
})();

(() => {
  const currencyConverterApp = angular.module('currencyConverterApp');

  currencyConverterApp.controller('currencyController', ['$scope', 'currencyService', 'commissions', function currencyController($scope, currencyService, commissions) {
    $scope.currencies = [];
    $scope.commissions = commissions;

    $scope.currencyToSell = null;
    $scope.currencyToBuy = null;
    $scope.commission = null;

    $scope.crossPrice = null;

    $scope.value = 0;

    $scope.swapCurrencies = () => {
      [$scope.currencyToSell, $scope.currencyToBuy] = [$scope.currencyToBuy, $scope.currencyToSell];
    };

    $scope.disableAnotherInput = () => {
    };

    currencyService.updatePrices().then((response) => {
      $scope.currencies = response.data;
    });

    // console.log($scope.currencies)
  }]);
})();

/* eslint-disable implicit-arrow-linebreak */
(() => {
  const currencyConverterApp = angular.module('currencyConverterApp');

  currencyConverterApp.service('currencyService', ['$http', 'urlPrivate', function currencyService($http, urlPrivate) {
    this.updatePrices = () =>
      $http({
        method: 'GET',
        url: urlPrivate,
      });
  }]);

  currencyConverterApp.value('commissions', [0, 1, 2, 3, 4, 5]);
  currencyConverterApp.value('urlPrivate', 'https://api.privatbank.ua/p24api/pubinfo?json&exchange&coursid=5');
})();

/* eslint-disable implicit-arrow-linebreak */
(() => {
  const currencyConverterApp = angular.module('currencyConverterApp');

  currencyConverterApp.filter('filterCurrencies', () =>
    (currencies, usedCurrency) =>
      currencies.filter(currency => currency !== usedCurrency));
})();
